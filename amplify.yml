version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Build is Starting ____________________"
        - npm ci --force
    build:
      commands:
        - echo "I am runing on build commands"
        - npm run build
  artifacts:
    baseDirectory: dist/amplify-app
    files:
      - '**/*'
  cache:
    paths:
      - .npm/**/*
backend:
  functions:
    ReservationAndLeasedHouseFuncton-dev:
      runtime: python3.8
      handler: index.handler
      environment:
        VARIABLES: env
      build:
        commands:
          - sudo update-alternatives --install /usr/bin/python3 python3 /usr/local/bin/python3.8 11
          - echo "Installing Pip enviroment and __________________________________"
          - pip3.8 install pipenv
          - pip install virtualenv
          - pip install -r requirements.txt
          - amplifyPush --simple
      artifacts:
        # Path to the built Lambda function code
        baseDirectory: .
        files:
          - 'index.py'
          - 'requirements.txt'   
   
        
